<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Energy Point</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
</head>

</head>

<nav class="navbar navbar-expand-lg py-3 fixed-top" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img src="img/logo - exe branco.svg" alt="Logo" width="36" height="30" class="d-inline-block align-text-top">
      Energy Point
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link " href="inicio.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="indexmapa.html">Mapa</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="login.html">Login</a>
        </li>
      </ul>
    </div>
  </div>
</nav><br><br><br>

<body>

  <section class="tudo">
    <h2>Preencha com suas informações</h2>
    <form id="registrationForm">
      <div class="row g-3">
        <div class="col">
          <input type="text" class="form-control" placeholder="Nome" name="nome" aria-label="Nome">
        </div>
        <div class="col">
          <input type="text" class="form-control" placeholder="Sobrenome" name="sobrenome" aria-label="Sobrenome">
        </div>
      </div><br><br>
      <div class="mb-3">
        <label for="Rua" class="form-label">Endereço</label>
        <input type="text" class="form-control" id="Rua" name="endereco" placeholder="Rua (Av, pça, etc.) e número">
      </div><br>
      <div class="mb-3">
        <label for="CEP" class="form-label">CEP</label>
        <input type="text" class="form-control" id="CEP" name="CEP" placeholder="CEP">
      </div><br>
      <div class="mb-3">
        <label for="bairro" class="form-label">Bairro</label>
        <input type="text" class="form-control" id="bairro" name="bairro" placeholder="Bairro">
      </div><br>
      <div class="row g-3">
        <div class="col-md-6">
          <label for="Cidade" class="form-label">Cidade</label>
          <input type="text" class="form-control" id="Cidade" name="cidade" placeholder="Cidade">
        </div>
        <div class="col-md-4">
          <label for="Estado" class="form-label">Estado</label>
          <select id="Estado" class="form-select" name="estado">
            <option selected>Estado</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amapá</option>
            <option value="AM">Amazonas</option>
            <option value="BA">Bahia</option>
            <option value="CE">Ceará</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Espírito Santo</option>
            <option value="GO">Goiás</option>
            <option value="MA">Maranhão</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso Do Sul</option>
            <option value="MG">Minas Gerais</option>
            <option value="PA">Pará</option>
            <option value="PB">Paraíba</option>
            <option value="PR">Paraná</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piauí</option>
            <option value="RJ">Rio De Janeiro</option>
            <option value="RN">Rio Grande Do Norte</option>
            <option value="RS">Rio Grande Do Sul</option>
            <option value="RO">Rondônia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option>
            <option value="SP">São Paulo</option>
            <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option>
          </select>
        </div>
      </div>
      <br><br>
      <div class="mb-3">
        <label for="Senha" class="form-label">Senha</label>
        <input type="password" class="form-control" id="Senha" name="senha" placeholder="Senha">
      </div><br><br>
      <div class="mb-3">
        <label for="Confirmasenha" class="form-label">Confirmar Senha</label>
        <input type="password" class="form-control" id="Confirmasenha" name="confirmasenha"
          placeholder="Confirmar Senha">
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="exampleCheck1">
        <label class="form-check-label" for="exampleCheck1">Check me out</label>
      </div>
      <br>
      <div class="contato">
        <h2>Quais são suas informações de contato?</h2><br><br>
        <div class="mb-3">
          <label for="Email" class="form-label">E-mail</label>
          <input type="email" class="form-control" id="Email" aria-describedby="emailHelp" name="email"
            placeholder="E-mail">
        </div>
        <div class="row g-3">
          <div class="col">
            <label for="DDD">DDD</label>
            <input type="text" class="form-control" id="DDD" placeholder="DDD" name="DDD">
          </div>
          <div class="col">
            <label for="Numero">Número</label>
            <input type="text" class="form-control" id="Numero" placeholder="Número" name="celular">
          </div>
        </div><br>
        <div class="button">
          <button name="criarconta" type="submit" class="btn btn-primary">Finalizar</button><br>
        </div>
      </div>
    </form>
  </section>
  <script defer src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.9.0/firebase-auth-compat.js"></script>


  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const firebaseConfig = {
        apiKey: "AIzaSyDP7pRv2U068DKtQPNlmNEzxSh4AHvwsCM",
        authDomain: "energypoint-5f375.firebaseapp.com",
        projectId: "energypoint-5f375",
        storageBucket: "energypoint-5f375.appspot.com",
        messagingSenderId: "799491864801",
        appId: "1:799491864801:web:26483095ebb66a5fac9fa0"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      // CADASTRO DA CONTA
      const buttonCriarConta = document.querySelector('button[name=criarconta]');
      const form = document.getElementById('registrationForm');

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        const formData = {
          email: document.querySelector("input[name=email]").value,
          nome: document.querySelector("input[name=nome]").value,
          sobrenome: document.querySelector("input[name=sobrenome]").value,
          senha: document.querySelector("input[name=senha]").value,
          confirmasenha: document.querySelector("input[name=confirmasenha]").value,
          endereco: document.querySelector("input[name=endereco]").value,
          CEP: document.querySelector("input[name=CEP]").value,
          bairro: document.querySelector("input[name=bairro]").value,
          cidade: document.querySelector("input[name=cidade]").value,
          estado: document.querySelector("select[name=estado]").value,
          DDD: document.querySelector("input[name=DDD]").value,
          celular: document.querySelector("input[name=celular]").value,
        };

        if (formData.senha !== formData.confirmasenha) {
          alert('As senhas não coincidem!');
          return;
        }

        firebase.auth().createUserWithEmailAndPassword(formData.email, formData.senha)
          .then(data => {
            const uid = data.user.uid;
            const users = firebase.firestore().collection('users');
            return users.doc(uid).set({
              Email: formData.email,
              Nome: formData.nome,
              Sobrenome: formData.sobrenome,
              Endereco: formData.endereco,
              CEP: formData.CEP,
              Bairro: formData.bairro,
              Cidade: formData.cidade,
              Estado: formData.estado,
              DDD: formData.DDD,
              Celular: formData.celular,
            });
          })
          .then(() => {
            alert('Conta criada com sucesso!');
          })
          .catch(error => {
            if (error.code === 'auth/email-already-in-use') {
              alert('Esse email já foi cadastrado em outro usuário');
            } else {
              alert(error.message);
            }
          });
      });
    });
  </script>
</body>

</html>